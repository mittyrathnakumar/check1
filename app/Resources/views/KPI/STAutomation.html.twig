{% extends 'layout.html.twig' %}
{% block content %}
<ol class="breadcrumb">
 <div class="row col-sm-1">	</div>
    <li><h3><a href="">ST Automation</a></h3></li>
</ol>
{% if status is defined %}
		<p class="bg-info">{{ status }}</p>
{% endif %}
<div class="row col-sm-1">	</div>
 <div class="row col-md-8">
	<form class="form-inline" role="form" id="frmSearch" method="Post" action="">
	   <div class="col-md-4">
	    <label for="Month">Month/Year : </label>	    
	    <select name="Month" id="Month" class="form-control">
	       	<option value="">--Select--</option>
	       	{% if postData.Month is defined %}
	       		{% set Month = postData.Month %}
	       	{% endif %}
	       		       	
	       	{% for row in monthYearArray %}
	       		<option value="{{ row }}" {% if Month is defined and Month == row %} selected {% endif %}>{{ row }}</option>
	       	{% endfor %}
		  </select>
	  </div>
	  <div class="col-md-8">
	  <button type="submit" name="Search" value="1" class="btn btn-primary">Search</button> 
	  <button type="submit" name="ShowAll" value="1" class="btn btn-primary">Refresh</button>
	  </div>
	</form>
</div>
<br><br><br><br>
<div class="row col-sm-1">	</div>
<div class="text-primary">(Default list shows results from current month. Pls make a search to find out other projects.)</div><br>
<div class="row col-sm-1">	</div>
<div class="row col-md-11">		
	<table class="table-condensed table-bordered table-hover" id="dataTable">
		<thead>
			<tr class="bg_grey">					
				<th>No.</th>
				<th>Project Name</th>
				<th>ST Automated TestCases</th>
				<th>ST Total TestCases</th>
				<th>ST Automation %</th>
			</tr>
		</thead>
		<tbody>		
			{% for row in STAutomation %}
				<tr>
				<td>{{ loop.index}}</td>
				<td>{{ row.getProjectName}}</td>
				<td><span id="stAutomatedTestCases_{{ loop.index }}" data-type="textarea" class="stAutomatedTestCases">{{ row.getSTAutomatedTestCases|upper}}</span></td>
				<td><span id="stTotalTestCases_{{ loop.index }}" data-type="textarea" data-pk="1" class="stTotalTestCases" style="text-transform: uppercase">{{ row.getSTTotalTestCases|upper}}</span></td>
				<td>
				{% if row.getSTAutomation is not null and row.getSTAutomation != 'N/A'%}{{ row.getSTAutomation }}% {% else %}
				{{ row.getSTAutomation() }}{% endif %}
				</td>
				
				<input type="hidden" id="ProjectIDHidden_{{ loop.index }}" value="{{ row.ProjectId }}">
				</tr>				
	    	{% endfor %}
		</tbody>
	</table>			
</div>
<div id="dialog" title="Result Action" class="modal_dialog"></div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{ asset('js/KPI/STAutomation.js') }}"></script>
	<script>
		loadDataTable_Export('STAutomation');					
	</script>
	{% endblock %}
